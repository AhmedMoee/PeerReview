{% extends "base.html" %}

{% block content %}
    <h1>All Uploaded Files for {{ project.name }}</h1>

    <!-- Search Form -->
    <form method="get" class="mb-3">
        <input type="text" name="search" value="{{ search_query }}" placeholder="Search files by name" class="form-control" />
        <button type="submit" class="btn btn-primary mt-2">Search</button>
    </form>

    <!-- File List -->
    <ul class="list-group">
        {% for file in files %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <!-- Adjust file link and name -->
                <a href="{% url 'view_file' project.name project.id file.id %}">{{ file.name }}</a>
                {% if is_owner_or_admin %}
                    <form action="{% url 'delete_file' project.name project.id file.id %}" method="post" class="d-inline-block">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                    </form>
                {% endif %}
            </li>
        {% empty %}
            <li class="list-group-item">No files uploaded.</li>
        {% endfor %}
    </ul>

    <a href="{% url 'project_view' project.name project.id %}" class="btn btn-secondary mt-3">Back to Project</a>
{% endblock %}
